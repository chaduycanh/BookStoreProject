jQuery(document).ready(function($){$("#phonenumberautocall").focus(function(){$(this).attr('placeholder','')});$("#phonenumberautocall").blur(function(){$(this).attr('placeholder','Số điện thoại của bạn vd: 098xxxxxxx')});$('#button-call').on('click',function(e){e.preventDefault();function checkPhoneNumber(){var flag=!1;var phone=$('#phonenumberautocall').val().trim();phone=phone.replace('(+84)','0');phone=phone.replace('+84','0');phone=phone.replace('0084','0');phone=phone.replace(/ /g,'');if(phone!=''){var firstNumber=phone.substring(0,2);if((firstNumber=='09'||firstNumber=='08')&&phone.length==10){if(phone.match(/^\d{10}/)){flag=!0}}else if(firstNumber=='01'&&phone.length==11){if(phone.match(/^\d{11}/)){flag=!0}}}
return flag}
if(!checkPhoneNumber()){$('#phonenumberautocall').parents('div.form-group').addClass('has-error');$('#phonenumberautocall').focus();$('#call-error').html('Số điện thoại không hợp lệ.');e.preventDefault()}
$('#phonenumberautocall').keypress(function(){$(this).parents('div.form-group').removeClass('has-error');$('#call-error').html('')});var error=!1;$req_phone=$("#phonenumberautocall").val();if($.isNumeric($req_phone)==!1){$('#call-error').html('Số điện thoại phải là số.')}
if($req_phone==''){$('#call-error').html('Vui lòng nhận số điện thoại.')}
if($req_phone||$.isNumeric($req_phone)!=!0){error=!1}else{error=!0}
if(!error&&checkPhoneNumber()){var home=location.hostname;var data=$('form#callautoform').serialize();var action='https://www.chili.vn/wp-content/themes/bb-theme-child/template-parts/check-callnow.php';$(this).html('<i class="fa fa-cog fa-spin" style="color:#fe5411;"></i> Đang xử lý... ');$.ajax({type:'POST',url:action,data:data,dataType:'json',beforeSend:function(){$('#callautoform').addClass('handle');$('#callautoform').addClass('active')},success:function(result){console.log(result);$('#call-error').css({display:'none'});$('#call-message').css({display:'block'});$('#call-message').html(result.alert);$('#callautoform').removeClass('handle');$('#callautoform').addClass('active');setTimeout(function(){location.reload()},5000)},error:function(result){console.log(result)}});return!1}
e.preventDefault()})})